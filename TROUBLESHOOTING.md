# Решение проблем с загрузкой сайта

## Проблема: Сайт не грузится

### 1. Проверьте, запущено ли приложение

```bash
python web_app.py
```

Должно появиться:
```
 * Running on http://0.0.0.0:5000
```

### 2. Проверьте ошибки в консоли

Если есть ошибки при запуске, они покажутся в консоли.

### 3. Основные проблемы и решения

#### Ошибка: "NameError: name 'DB_CONFIG' is not defined"

**Решение:** Файл уже исправлен. Если ошибка все еще есть, перезапустите приложение.

#### Ошибка: "ModuleNotFoundError: No module named 'requests'"

**Решение:**
```bash
pip install requests
```

#### Ошибка: "Connection refused" при обращении к API

**Решение:** 
1. Проверьте, что API сервер бота запущен
2. Обновите `API_CONFIG['base_url']` в `web_app.py`
3. Для локальной разработки можно временно использовать:
   ```python
   API_CONFIG = {
       'base_url': 'http://localhost:5001',  # Если API на том же компьютере
   }
   ```

#### Ошибка: "TemplateNotFound"

**Решение:**
- Убедитесь, что папка `templates/` существует
- Проверьте, что файлы шаблонов на месте

#### Сайт открывается, но показывает ошибку 500

**Решение:**
1. Проверьте логи в консоли
2. Убедитесь, что API сервер бота доступен
3. Проверьте, что все зависимости установлены

### 4. Быстрая проверка

Запустите в консоли:
```bash
cd "c:\Users\gulie\Downloads\Telegram Desktop\679"
python -c "from web_app import app; print('OK')"
```

Если выводит "OK" - файл загружается без ошибок.

### 5. Тест запуска

```bash
python web_app.py
```

Затем откройте в браузере: `http://localhost:5000`

Если страница не открывается:
- Проверьте, что порт 5000 не занят
- Проверьте firewall
- Попробуйте другой порт: измените в конце файла `port=5000` на `port=8080`

### 6. Проверка API подключения

Если главная страница открывается, но авторизация не работает:

1. Проверьте доступность API:
   ```bash
   curl http://your-bot-server-ip:5001/api/health
   ```

2. Обновите `API_CONFIG` в `web_app.py`

### 7. Временное решение для тестирования

Если API сервер бота еще не запущен, можно временно закомментировать проверки API:

В `api_request()` добавьте обработку ошибок:
```python
except requests.exceptions.RequestException as e:
    logger.error(f"API request error: {e}")
    # Временно возвращаем пустые данные для тестирования
    return []
```

**ВНИМАНИЕ:** Это только для тестирования! В продакшене API должен работать.

## Если ничего не помогает

1. Проверьте версию Python: `python --version` (должна быть 3.8+)
2. Переустановите зависимости: `pip install -r requirements.txt --force-reinstall`
3. Проверьте права доступа к файлам
4. Посмотрите логи ошибок в консоли


